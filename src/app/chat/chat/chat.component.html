<div class="chat">
  <h2>⚡ Barry AI Chat</h2>
  
  <div class="chat-area" #scrollMe style="height: 400px; overflow-y: auto;">
    
    <div *ngFor="let msg of mensagens" class="msg" [class.user]="msg.tipo === 'user'">
      <strong>{{ msg.tipo === 'user' ? 'Você:' : 'BarryAI:' }}</strong> 
      
      <!-- Renderiza texto com formatação (Markdown) -->
      <div class="markdown-text">
        <markdown [data]="msg.texto"></markdown>
      </div>
    </div>

    <div *ngIf="carregando"><em>Barry está digitando...</em></div>
  </div>

  <div class="input-area">
    <!-- CORREÇÃO AQUI: Mudamos de userMessage para textoInput -->
    <input [(ngModel)]="textoInput" 
           type="text" 
           placeholder="Faça sua pergunta..." 
           (keyup.enter)="enviar()" />
    
    <button (click)="enviar()">Enviar</button>
  </div>
</div>